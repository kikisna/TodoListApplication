<!DOCTYPE html>
<html>
   <head>
      <title>Todo Analysis</title>
      <style>
         body {
         font-family: Arial, sans-serif;
         background-color: #f2f2f2;
         margin: 0;
         padding: 0;
         display: flex;
         flex-direction: column;
         align-items: center;
         }
         h1 {
         color: #333;
         margin: 20px 0;
         text-align: center;
         }
         h2 {
         color: #333;
         margin: 40px 0 20px;
         font-size: 24px;
         }
         table {
         width: 50%;
         border-collapse: collapse;
         margin-bottom: 40px;
         background-color: white;
         box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
         }
         th {
         background-color: #4269E1;
         color: white;
         font-weight: normal;
         padding: 12px;
         text-align: left;
         }
         td {
         padding: 12px;
         border-bottom: 1px solid #ddd;
         }
         tr:hover {
         background-color: #f5f5f5;
         }
         p {
         font-size: 20px;
         margin-bottom: 40px;
         }
         .navbar {
         background-color: rgba(17, 15, 15, 0.81);
         width: 100%;
         padding: 15px;
         display: flex;
         justify-content:flex-start;
         }
         .navbar-nav {
         display: flex;
         list-style: none;
         margin: 0;
         padding: 0;
         }
         .nav-item {
         margin: 0 10px;
         }
         .nav-link {
         color: white;
         text-decoration: none;
         font-weight: bold;
         padding: 10px 15px;
         border-radius: 5px;
         transition: background-color 0.2s ease;
         }
         .nav-link:hover {
         background-color: rgba(255, 255, 255, 0.2);
         }
         .nav-item:last-child {
         margin-left: auto;
         }
      </style>
   </head>
   <body>
      <nav class="navbar">
         <ul class="navbar-nav">
            <li class="nav-item">
               <a href="/tasks" class="nav-link">Tasks</a>
            </li>
            <li class="nav-item">
               <a href="/analysis" class="nav-link">Analysis</a>
            </li>
            <li class="nav-item">
               <a href="/logout" class="nav-link" style="margin-left: 1600px;">Logout</a>
            </li>
         </ul>
      </nav>
      <h1>Task Analysis</h1>
      <h2>Tasks Completed After Deadline</h2>
      <table>
         <thead>
            <tr>
               <th>Title</th>
               <th>Latency</th>
            </tr>
         </thead>
         <tbody>
            {% for task in tasks_after_deadline %}
            <tr>
               <td>{{ task.title }}</td>
               <td>{{ task.latency }} minutes</td>
            </tr>
            {% endfor %}
         </tbody>
      </table>
      <h2>Average Task Completion Time</h2>
      <p>{{ avg_completion_time }} minutes</p>
      <h2>Completed Tasks by Type</h2>
      <table>
         <thead>
            <tr>
               <th>Task Type</th>
               <th>Count</th>
            </tr>
         </thead>
         <tbody>
            {% for task in completed_tasks_by_type %}
            <tr>
               <td>{{ task.task_type }}</td>
               <td>{{ task.count }}</td>
            </tr>
            {% endfor %}
         </tbody>
      </table>
      <h2>Uncompleted Tasks by Deadline</h2>
      <table>
         <thead>
            <tr>
               <th>Title</th>
               <th>Deadline</th>
            </tr>
         </thead>
         <tbody>
            {% for task in uncompleted_tasks_by_deadline %}
            <tr>
               <td>{{ task.title }}</td>
               <td>{{ task.deadline }}</td>
            </tr>
            {% endfor %}
         </tbody>
      </table>
      <h2>Top 2 Completed Tasks by Completion Time</h2>
      <table>
         <thead>
            <tr>
               <th>Title</th>
               <th>Completion Time</th>
            </tr>
         </thead>
         <tbody>
            {% for task in top_completed_tasks %}
            <tr>
               <td>{{ task.title }}</td>
               <td>{{ task.completion_time }} minutes</td>
            </tr>
            {% endfor %}
         </tbody>
      </table>
   </body>
</html>